
# Учебная Виртуальная Машина (УВМ): Ассемблер и Интерпретатор

## Описание проекта

Этот проект реализует учебную виртуальную машину (УВМ), ассемблер и интерпретатор для работы с системой команд УВМ. Виртуальная машина предназначена для выполнения низкоуровневых операций с регистрами и памятью на основе заданного набора команд. Ассемблер позволяет преобразовывать текстовые программы на языке ассемблера в бинарный код, который затем может быть исполнен интерпретатором.

### Основные компоненты:
1. **Ассемблер** (`assembly.py`) — переводит текстовую программу в бинарный код.
2. **Интерпретатор** (`virtual_machine.py`) — выполняет бинарный код, изменяет состояние регистров и памяти.
3. **Тесты** (`tests.py`) — проверяют работу ассемблера и интерпретатора.
4. **Тестовая программа** (`vector_comparison.asm`) — пример программы, которая сравнивает элементы вектора с числом 247 и записывает результат в новый вектор.

## Описание системы команд УВМ

Виртуальная машина поддерживает следующие команды:

1. **LOAD_CONST (A = 79)** — загрузка константы в регистр.
    - Формат: `LOAD_CONST Rb, C`
    - Размер команды: 6 байт
    - Пример: `LOAD_CONST R1, 100`

2. **READ_MEM (A = 220)** — чтение значения из памяти.
    - Формат: `READ_MEM Rc, [Rb]`
    - Размер команды: 3 байта
    - Пример: `READ_MEM R2, [R1]`

3. **WRITE_MEM (A = 74)** — запись значения в память.
    - Формат: `WRITE_MEM Rd, [Rc + offset]`
    - Размер команды: 4 байта
    - Пример: `WRITE_MEM R3, [R1 + 5]`

4. **EQUAL (A = 131)** — бинарная операция сравнения.
    - Формат: `EQUAL Rd, Rb, Rc`
    - Размер команды: 3 байта
    - Пример: `EQUAL R4, R1, R2`

## Структура проекта

- `assembly.py` — ассемблер, который преобразует текстовые программы в бинарный код.
- `virtual_machine.py` — интерпретатор, который исполняет бинарный код.
- `tests.py` — тесты, проверяющие корректность работы ассемблера и интерпретатора.
- `vector_comparison.asm` — пример программы на ассемблере, сравнивающей вектор с числом 247.

## Как запустить проект

### 1. Ассемблирование программы

Для ассемблирования программы на ассемблере используйте следующий код:

```bash
python assemble_vector_comparison.py
```

Это преобразует файл `vector_comparison.asm` в бинарный файл `vector_comparison.bin` и создаст лог-файл `vector_log.yaml`.

### 2. Запуск программы на виртуальной машине

Чтобы выполнить программу на виртуальной машине, используйте следующий код:

```bash
python run_vector_comparison.py
```

Это исполнит бинарный код и создаст файл результата `vector_result.yaml`, где будет содержаться результат сравнения вектора.

### 3. Тестирование

Запустите тесты для проверки правильности работы:

```bash
pytest tests.py
```

Все тесты должны завершиться успешно.

## Ожидаемый результат

После выполнения тестовой программы (`vector_comparison.asm`), результирующий вектор (по адресам памяти с 200 по 203) будет содержать:

- Элемент 0: `0` (250 != 247)
- Элемент 1: `1` (247 == 247)
- Элемент 2: `0` (123 != 247)
- Элемент 3: `1` (247 == 247)

## Зависимости

- Python 3.x
- PyYAML
- pytest

Установка зависимостей:

```bash
pip install -r requirements.txt
```

## Структура команд

- **`assemble_vector_comparison.py`**: Ассемблирует программу.
- **`run_vector_comparison.py`**: Исполняет бинарный код на виртуальной машине.
- **`tests.py`**: Запускает тесты для проверки всех команд УВМ.

## Лицензия

Этот проект создан для учебных целей. Свободен для использования.